<mxfile host="app.diagrams.net" modified="2026-02-08T00:00:00.000Z" agent="Claude Code" version="24.0.0" type="device">
  <diagram name="AI Self-Querying Retriever Architecture" id="technical-architecture">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="AI Self-Querying Retriever - Technical Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="800" height="40" as="geometry" />
        </mxCell>

        <!-- Presentation Layer -->
        <mxCell id="presentation-layer" value="PRESENTATION LAYER" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="1440" height="160" as="geometry" />
        </mxCell>

        <mxCell id="react-frontend" value="React Frontend&#xa;(TypeScript + Vite)&#xa;Port: 3088" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="presentation-layer">
          <mxGeometry x="40" y="40" width="180" height="90" as="geometry" />
        </mxCell>

        <mxCell id="dashboard-page" value="Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="presentation-layer">
          <mxGeometry x="260" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="query-page" value="Query Interface" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="presentation-layer">
          <mxGeometry x="400" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="docs-page" value="Documents" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="presentation-layer">
          <mxGeometry x="540" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="collections-page" value="Collections" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="presentation-layer">
          <mxGeometry x="680" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="agent-viz-page" value="Agent Viz" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="presentation-layer">
          <mxGeometry x="820" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="analytics-page" value="Analytics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="presentation-layer">
          <mxGeometry x="960" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="history-page" value="Query History" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="presentation-layer">
          <mxGeometry x="1100" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="pipelines-page" value="Pipelines" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="presentation-layer">
          <mxGeometry x="1240" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="websocket-conn" value="WebSocket Connection&#xa;(Real-time Updates)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="presentation-layer">
          <mxGeometry x="260" y="90" width="1100" height="30" as="geometry" />
        </mxCell>

        <!-- API Gateway Layer -->
        <mxCell id="gateway-layer" value="API GATEWAY LAYER" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="80" y="300" width="1440" height="140" as="geometry" />
        </mxCell>

        <mxCell id="express-gateway" value="Node.js Express Gateway&#xa;Port: 3087" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="gateway-layer">
          <mxGeometry x="40" y="40" width="200" height="70" as="geometry" />
        </mxCell>

        <mxCell id="rate-limiter" value="Rate Limiter&#xa;(200 req/15min)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="gateway-layer">
          <mxGeometry x="280" y="40" width="140" height="60" as="geometry" />
        </mxCell>

        <mxCell id="cors-handler" value="CORS Handler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="gateway-layer">
          <mxGeometry x="450" y="40" width="140" height="60" as="geometry" />
        </mxCell>

        <mxCell id="request-logger" value="Request Logger&#xa;(Correlation IDs)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="gateway-layer">
          <mxGeometry x="620" y="40" width="140" height="60" as="geometry" />
        </mxCell>

        <mxCell id="proxy-routes" value="Proxy Routes&#xa;/api/query/*&#xa;/api/documents/*&#xa;/api/agents/*" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="gateway-layer">
          <mxGeometry x="790" y="40" width="160" height="80" as="geometry" />
        </mxCell>

        <mxCell id="websocket-mgr" value="WebSocket Manager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="gateway-layer">
          <mxGeometry x="980" y="40" width="160" height="60" as="geometry" />
        </mxCell>

        <mxCell id="health-check" value="Health Check&#xa;Aggregator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="gateway-layer">
          <mxGeometry x="1170" y="40" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- Backend Application Layer -->
        <mxCell id="backend-layer" value="BACKEND APPLICATION LAYER" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="80" y="480" width="1440" height="280" as="geometry" />
        </mxCell>

        <mxCell id="django-backend" value="Django 5 + DRF&#xa;(ASGI via Daphne)&#xa;Port: 8083" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1" vertex="1" parent="backend-layer">
          <mxGeometry x="40" y="40" width="180" height="80" as="geometry" />
        </mxCell>

        <!-- LangGraph Multi-Agent System -->
        <mxCell id="langgraph-system" value="LangGraph Multi-Agent System" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="backend-layer">
          <mxGeometry x="260" y="40" width="720" height="220" as="geometry" />
        </mxCell>

        <mxCell id="query-analyzer" value="Query Analyzer&#xa;(LLM Analysis)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="langgraph-system">
          <mxGeometry x="20" y="40" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="supervisor" value="Supervisor&#xa;(Router)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="langgraph-system">
          <mxGeometry x="160" y="40" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="vector-retriever" value="Vector Retriever" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="langgraph-system">
          <mxGeometry x="20" y="110" width="110" height="40" as="geometry" />
        </mxCell>

        <mxCell id="bm25-retriever" value="BM25 Retriever" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="langgraph-system">
          <mxGeometry x="145" y="110" width="110" height="40" as="geometry" />
        </mxCell>

        <mxCell id="hybrid-retriever" value="Hybrid Merger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="langgraph-system">
          <mxGeometry x="270" y="110" width="110" height="40" as="geometry" />
        </mxCell>

        <mxCell id="selfquery-retriever" value="Self-Query&#xa;Constructor" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="langgraph-system">
          <mxGeometry x="395" y="110" width="110" height="40" as="geometry" />
        </mxCell>

        <mxCell id="hypo-retriever" value="Hypothetical Q&#xa;Generator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="langgraph-system">
          <mxGeometry x="520" y="110" width="110" height="40" as="geometry" />
        </mxCell>

        <mxCell id="reranker" value="Reranker&#xa;(Cross-Encoder)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="langgraph-system">
          <mxGeometry x="20" y="165" width="110" height="40" as="geometry" />
        </mxCell>

        <mxCell id="compressor" value="Context&#xa;Compressor" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="langgraph-system">
          <mxGeometry x="145" y="165" width="110" height="40" as="geometry" />
        </mxCell>

        <mxCell id="query-expander" value="Query Expander" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="langgraph-system">
          <mxGeometry x="270" y="165" width="110" height="40" as="geometry" />
        </mxCell>

        <mxCell id="answer-gen" value="Answer Generator&#xa;(LLM Synthesis)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="langgraph-system">
          <mxGeometry x="520" y="165" width="140" height="40" as="geometry" />
        </mxCell>

        <!-- Services -->
        <mxCell id="services-group" value="Core Services" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="backend-layer">
          <mxGeometry x="1020" y="40" width="380" height="220" as="geometry" />
        </mxCell>

        <mxCell id="vector-store-service" value="ChromaDB Service&#xa;(Vector Store)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="services-group">
          <mxGeometry x="20" y="40" width="150" height="50" as="geometry" />
        </mxCell>

        <mxCell id="retriever-service" value="Retriever Services&#xa;(5 Implementations)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="services-group">
          <mxGeometry x="200" y="40" width="150" height="50" as="geometry" />
        </mxCell>

        <mxCell id="augmentation-service" value="Augmentation Services&#xa;(Rerank/Compress)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="services-group">
          <mxGeometry x="20" y="105" width="150" height="50" as="geometry" />
        </mxCell>

        <mxCell id="observability-service" value="Observability Service&#xa;(LangSmith/LangFuse)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="services-group">
          <mxGeometry x="200" y="105" width="150" height="50" as="geometry" />
        </mxCell>

        <mxCell id="celery-tasks" value="Celery Worker&#xa;(Async Document Processing)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="services-group">
          <mxGeometry x="20" y="165" width="330" height="40" as="geometry" />
        </mxCell>

        <!-- Data Layer -->
        <mxCell id="data-layer" value="DATA & INFRASTRUCTURE LAYER" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="80" y="800" width="1440" height="160" as="geometry" />
        </mxCell>

        <mxCell id="postgresql" value="PostgreSQL 16&#xa;(Metadata, Queries,&#xa;Documents, Results)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="data-layer">
          <mxGeometry x="100" y="40" width="150" height="90" as="geometry" />
        </mxCell>

        <mxCell id="chromadb" value="ChromaDB&#xa;(Vector Store,&#xa;Embeddings)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="data-layer">
          <mxGeometry x="300" y="40" width="150" height="90" as="geometry" />
        </mxCell>

        <mxCell id="redis" value="Redis 7&#xa;(Cache, Celery Broker,&#xa;Result Backend)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="data-layer">
          <mxGeometry x="500" y="40" width="150" height="90" as="geometry" />
        </mxCell>

        <!-- External Services -->
        <mxCell id="external-services" value="External Services" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="data-layer">
          <mxGeometry x="700" y="30" width="700" height="110" as="geometry" />
        </mxCell>

        <mxCell id="openai-api" value="OpenAI API&#xa;(LLM + Embeddings)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="external-services">
          <mxGeometry x="20" y="35" width="150" height="60" as="geometry" />
        </mxCell>

        <mxCell id="langsmith" value="LangSmith&#xa;(Tracing)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="external-services">
          <mxGeometry x="200" y="35" width="130" height="60" as="geometry" />
        </mxCell>

        <mxCell id="langfuse" value="LangFuse&#xa;(Observability)&#xa;Port: 3085" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="external-services">
          <mxGeometry x="360" y="35" width="130" height="60" as="geometry" />
        </mxCell>

        <mxCell id="flower" value="Flower&#xa;(Celery Monitor)&#xa;Port: 5583" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="external-services">
          <mxGeometry x="520" y="35" width="150" height="60" as="geometry" />
        </mxCell>

        <!-- MCP Server -->
        <mxCell id="mcp-server-box" value="MCP Server&#xa;(Node.js)&#xa;Port: 3086" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="1">
          <mxGeometry x="80" y="1000" width="200" height="80" as="geometry" />
        </mxCell>

        <!-- Arrows - Presentation to Gateway -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="react-frontend" target="express-gateway">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-label1" value="HTTP/WS" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow1">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Gateway to Backend -->
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="express-gateway" target="django-backend">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-label2" value="Proxy Requests" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow2">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Backend to LangGraph -->
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;dashed=1;" edge="1" parent="1" source="django-backend" target="langgraph-system">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-label3" value="Pipeline Execution" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow3">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Arrows - LangGraph to ChromaDB -->
        <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="vector-store-service" target="chromadb">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-label4" value="Vector Search" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow4">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Backend to PostgreSQL -->
        <mxCell id="arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="django-backend" target="postgresql">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-label5" value="ORM Queries" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow5">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Backend to Redis -->
        <mxCell id="arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="celery-tasks" target="redis">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-label6" value="Task Queue" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow6">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Backend to OpenAI -->
        <mxCell id="arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;dashed=1;" edge="1" parent="1" source="langgraph-system" target="openai-api">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="900" y="630" />
              <mxPoint x="900" y="880" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow-label7" value="LLM Calls" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow7">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="LEGEND" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="320" y="1000" width="500" height="160" as="geometry" />
        </mxCell>

        <mxCell id="legend1" value="User-Facing Component" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="legend-box">
          <mxGeometry x="20" y="35" width="140" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend2" value="Retrieval Component" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="legend-box">
          <mxGeometry x="180" y="35" width="140" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend3" value="Augmentation Component" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="legend-box">
          <mxGeometry x="340" y="35" width="140" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend4" value="Data Storage" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="legend-box">
          <mxGeometry x="20" y="75" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="legend5" value="External Service" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="legend-box">
          <mxGeometry x="140" y="75" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="legend6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="legend-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="260" y="90" as="sourcePoint" />
            <mxPoint x="320" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="legend6-label" value="Sync Call" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="legend6">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint y="-10" as="offset" />
          </mxGeometry>
        </mxCell>

        <mxCell id="legend7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=block;endFill=1;dashed=1;" edge="1" parent="legend-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="90" as="sourcePoint" />
            <mxPoint x="410" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="legend7-label" value="Async Call" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="legend7">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint y="-10" as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Key Features Box -->
        <mxCell id="features-box" value="KEY FEATURES" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="860" y="1000" width="660" height="160" as="geometry" />
        </mxCell>

        <mxCell id="feature1" value="✓ 5 Retrieval Strategies (Vector, BM25, Hybrid, Self-Query, HyDE)" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="features-box">
          <mxGeometry x="20" y="35" width="400" height="20" as="geometry" />
        </mxCell>

        <mxCell id="feature2" value="✓ Multi-Agent Orchestration via LangGraph StateGraph" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="features-box">
          <mxGeometry x="20" y="60" width="400" height="20" as="geometry" />
        </mxCell>

        <mxCell id="feature3" value="✓ Post-Retrieval Augmentation (Reranking, Compression, Expansion)" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="features-box">
          <mxGeometry x="20" y="85" width="400" height="20" as="geometry" />
        </mxCell>

        <mxCell id="feature4" value="✓ Real-Time Analytics &amp; Observability (LangSmith + LangFuse)" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="features-box">
          <mxGeometry x="20" y="110" width="400" height="20" as="geometry" />
        </mxCell>

        <mxCell id="feature5" value="✓ Async Document Processing via Celery Workers" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="features-box">
          <mxGeometry x="20" y="130" width="400" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
